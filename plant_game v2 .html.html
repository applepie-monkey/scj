<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>植物分類圖填充工具 (位置調整版)</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
            user-select: none;
        }

        h2 { color: #333; margin-bottom: 10px; }

        .game-container {
            width: 100%;
            max-width: 950px; /* 增加容器寬度以容納更寬的圖表 */
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
        }

        /* --- 圖表區域 --- */
        .chart-wrapper {
            position: relative;
            width: 100%;
            /* 調整比例以適應新的寬度 900:550 */
            padding-bottom: 61.1%; 
            height: 0;
        }

        .bg-chart {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* --- 放置區域 (Drop Zones) --- */
        .drop-zone {
            position: absolute;
            background-color: #fff;
            border: 3px solid #333;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #aaa;
            box-shadow: 3px 3px 0px rgba(0,0,0,0.1);
            transition: all 0.2s;
            z-index: 10;
            overflow: hidden;
        }

        .drop-zone.drag-over {
            background-color: #e3f2fd;
            border-color: #2196F3;
            transform: scale(1.02);
        }

        /* --- 座標設定 (根據 SVG 900x550 的比例計算) --- */
        
        /* 1. 左上 (保持不變) */
        #zone-1 { top: 18%; left: 2%; width: 28%; height: 12%; }
        
        /* 2. 右上 (向右移動) */
        #zone-2 { top: 18%; left: 58%; width: 28%; height: 12%; }
        
        /* 3. 中間 (位置微調以配合 Box 2) */
        #zone-3 { top: 40%; left: 35%; width: 28%; height: 12%; }
        
        /* 4. 右邊 (大幅向右移動) */
        #zone-4 { top: 40%; left: 70%; width: 28%; height: 12%; }
        
        /* 5. 左下 */
        #zone-5 { top: 68%; left: 18%; width: 28%; height: 12%; }
        
        /* 6. 中下 */
        #zone-6 { top: 68%; left: 52%; width: 28%; height: 12%; }


        /* --- 下半部分：選項池 --- */
        .options-pool {
            margin-top: 20px;
            padding: 20px;
            background-color: #eee;
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            min-height: 80px;
            border: 2px dashed #bbb;
        }

        .draggable-item {
            background-color: #fff;
            padding: 8px 12px;
            border: 2px solid #555;
            border-radius: 6px;
            cursor: grab;
            font-size: 0.95rem;
            font-weight: bold;
            color: #000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .draggable-item:active {
            cursor: grabbing;
            transform: scale(0.95);
            background-color: #fdfdfd;
        }

        .drop-zone .draggable-item {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
            box-shadow: none;
            background-color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px;
            font-size: clamp(12px, 2.5vw, 16px);
            white-space: normal;
        }
    </style>
</head>
<body>

    <h2>植物分類圖填充</h2>
    <div style="margin-bottom: 10px; font-size: 0.9rem; color: #666;">
        提示：將下方的描述方塊拖曳到上方對應的空格中。
    </div>

    <div class="game-container">
        <div class="chart-wrapper">
            <svg class="bg-chart" viewBox="0 0 900 550" xmlns="http://www.w3.org/2000/svg">
                <style>
                    .line { stroke: #333; stroke-width: 2; fill: none; }
                    .dashed-box { fill: none; stroke: #999; stroke-width: 2; stroke-dasharray: 5,5; rx: 10; }
                    .box-text { font-family: "Microsoft JhengHei"; font-size: 24px; fill: #666; text-anchor: middle; dominant-baseline: middle; }
                    .header-box { fill: #888; rx: 15; }
                    .header-text { fill: white; font-size: 28px; font-weight: bold; text-anchor: middle; dominant-baseline: middle; }
                </style>

                <rect x="300" y="10" width="300" height="60" class="header-box" />
                <text x="450" y="42" class="header-text">植物 W 至 Z</text>

                <path d="M450 70 V85 H145 V100" class="line" /> 
                <path d="M450 70 V85 H710 V100" class="line" />

                <line x1="145" y1="166" x2="145" y2="230" class="line" />

                <path d="M710 166 V190 H480 V220" class="line" /> <path d="M710 166 V190 H830 V220" class="line" /> <line x1="830" y1="286" x2="830" y2="340" class="line" />

                <path d="M480 286 V340 H310 V374" class="line" /> <path d="M480 286 V340 H650 V374" class="line" /> <line x1="310" y1="440" x2="310" y2="470" class="line" />

                <line x1="650" y1="440" x2="650" y2="470" class="line" />

                <rect x="55" y="230" width="180" height="50" class="dashed-box" />
                <text x="145" y="258" class="box-text">洋紫荊</text>

                <rect x="740" y="340" width="180" height="50" class="dashed-box" />
                <text x="830" y="368" class="box-text">大紅花</text>

                <rect x="220" y="470" width="180" height="50" class="dashed-box" />
                <text x="310" y="498" class="box-text">竹</text>

                <rect x="560" y="470" width="180" height="50" class="dashed-box" />
                <text x="650" y="498" class="box-text">細葉榕</text>
            </svg>

            <div class="drop-zone" id="zone-1">1</div>
            <div class="drop-zone" id="zone-2">2</div>
            <div class="drop-zone" id="zone-3">3</div>
            <div class="drop-zone" id="zone-4">4</div>
            <div class="drop-zone" id="zone-5">5</div>
            <div class="drop-zone" id="zone-6">6</div>
        </div>

        <div class="options-pool" id="pool">
            <div class="draggable-item" draggable="true">葉片的葉緣呈鋸齒狀</div>
            <div class="draggable-item" draggable="true">葉片非心形</div>
            <div class="draggable-item" draggable="true">葉片有網狀脈</div>
            <div class="draggable-item" draggable="true">葉片的葉緣平滑</div>
            <div class="draggable-item" draggable="true">葉片有平行脈</div>
            <div class="draggable-item" draggable="true">葉片呈心形</div>
        </div>
    </div>

    <script>
        const draggables = document.querySelectorAll('.draggable-item');
        const dropZones = document.querySelectorAll('.drop-zone');
        const pool = document.getElementById('pool');

        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', () => {
                draggable.classList.add('dragging');
            });
            draggable.addEventListener('dragend', () => {
                draggable.classList.remove('dragging');
            });
        });

        const allZones = [...dropZones, pool];
        
        allZones.forEach(zone => {
            zone.addEventListener('dragover', e => {
                e.preventDefault();
                if(zone !== pool) zone.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', () => {
                zone.classList.remove('drag-over');
            });

            zone.addEventListener('drop', e => {
                e.preventDefault();
                zone.classList.remove('drag-over');
                
                const draggable = document.querySelector('.dragging');
                if(!draggable) return;

                if (zone === pool) {
                    pool.appendChild(draggable);
                } else {
                    const existingItem = zone.querySelector('.draggable-item');
                    if (existingItem) {
                        pool.appendChild(existingItem);
                    }
                    zone.appendChild(draggable);
                }
            });
        });
    </script>
</body>
</html>