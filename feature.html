<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‹•ç‰©ç‰¹å¾µåˆ†é¡</title>
    <style>
        /* å…¨å±€è¨­å®š */
        body {
            font-family: "PingFang HK", "Microsoft JhengHei", sans-serif;
            background-color: #f4f6f8;
            margin: 0;
            padding: 20px;
            /* ç¢ºä¿å³å´æœ‰æ»‘æ¢ï¼Œç•¶å…§å®¹å¤šæ™‚ */
            overflow-y: auto; 
            touch-action: pan-y; 
            box-sizing: border-box;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        /* --- ä¸ŠåŠéƒ¨åˆ†ï¼šç±ƒå­å€åŸŸ (3x3 Grid) --- */
        .baskets-wrapper {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3åˆ— */
            gap: 15px;
            margin-bottom: 40px;
            padding: 10px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .basket {
            background-color: #e3f2fd;
            border: 2px dashed #64b5f6;
            border-radius: 10px;
            min-height: 140px; /* ç±ƒå­é«˜åº¦ */
            display: flex;
            flex-direction: column;
            padding: 5px;
            transition: background-color 0.3s;
        }

        .basket-title {
            font-size: 1rem;
            font-weight: bold;
            color: #1565c0;
            text-align: center;
            background-color: rgba(255,255,255,0.7);
            padding: 5px;
            border-radius: 8px;
            margin-bottom: 5px;
            pointer-events: none; /* é˜²æ­¢èª¤è§¸æ–‡å­— */
        }

        .basket-content {
            flex-grow: 1;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-content: flex-start;
            gap: 5px;
        }

        /* --- ä¸‹åŠéƒ¨åˆ†ï¼šå‹•ç‰©ä¾†æºå€åŸŸ --- */
        .source-area-title {
            text-align: center;
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
        }

        .animals-source {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            min-height: 150px;
            border: 2px solid #ddd;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
        }

        /* --- å‹•ç‰©å¡ç‰‡æ¨£å¼ --- */
        .animal-card {
            width: 70px;
            height: 85px;
            background-color: #fff;
            border: 2px solid #ff9800; /* ä½¿ç”¨æ©™è‰²é‚Šæ¡†å€åˆ† */
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: grab;
            user-select: none;
            touch-action: none; /* é—œéµï¼šé˜²æ­¢æ‹–å‹•æ™‚ç•«é¢æ»¾å‹• */
            position: relative;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .animal-emoji {
            font-size: 35px;
            pointer-events: none;
            line-height: 1.2;
        }

        .animal-name {
            font-size: 12px;
            color: #333;
            pointer-events: none;
            margin-top: 2px;
            text-align: center;
            display: block; /* ç¢ºä¿æ”¾å…¥ç±ƒå­å¾Œæ–‡å­—ä»é¡¯ç¤º */
        }

        /* æ‹–å‹•æ™‚çš„ç‰¹æ•ˆ */
        .dragging {
            opacity: 0.8;
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            border-color: #f57c00;
        }

        /* æ”¾å…¥ç±ƒå­å¾Œçš„å¾®èª¿ï¼ˆé©æ‡‰ç±ƒå­ç©ºé–“ï¼‰ */
        .basket .animal-card {
            width: 55px;
            height: 70px;
            border: 1px solid #999;
        }
        .basket .animal-emoji {
            font-size: 25px;
        }
        .basket .animal-name {
            font-size: 10px;
            transform: scale(0.9); /* æ–‡å­—ç¨å¾®ç¸®å° */
        }

    </style>
</head>
<body>

    <h1>å‹•ç‰©ç‰¹å¾µåˆ†é¡</h1>
    <p style="text-align: center; color: #666; font-size: 0.9rem;">è«‹å°‡ä¸‹æ–¹çš„å‹•ç‰©æ‹–æ›³è‡³ç¬¦åˆç‰¹å¾µçš„ç±ƒå­ä¸­ï¼ˆç„¡éœ€åˆ¤æ–·å°éŒ¯ï¼‰ã€‚</p>

    <div class="baskets-wrapper">
        <div class="basket"><div class="basket-title">æœ‰æ¿•æ»‘çš„é±—ç‰‡</div><div class="basket-content"></div></div>
        <div class="basket"><div class="basket-title">é°­</div><div class="basket-content"></div></div>
        <div class="basket"><div class="basket-title">æœ‰æ¿•æ½¤çš„çš®è†š</div><div class="basket-content"></div></div>
        
        <div class="basket"><div class="basket-title">æœ‰ä¹¾ç¡¬çš„é±—ç‰‡</div><div class="basket-content"></div></div>
        <div class="basket"><div class="basket-title">æœ‰ç¾½æ¯›</div><div class="basket-content"></div></div>
        <div class="basket"><div class="basket-title">æœ‰ç¿…è†€</div><div class="basket-content"></div></div>
        
        <div class="basket"><div class="basket-title">æœ‰å–™</div><div class="basket-content"></div></div>
        <div class="basket"><div class="basket-title">æœ‰æ¯›é«®</div><div class="basket-content"></div></div>
        <div class="basket"><div class="basket-title">ä¹³è…º</div><div class="basket-content"></div></div>
    </div>

    <div class="source-area-title">å¾…åˆ†é¡å‹•ç‰©</div>
    <div class="animals-source" id="source-area">
        <div class="animal-card"><span class="animal-emoji">ğŸ¦­</span><span class="animal-name">æµ·è±¹</span></div>
        <div class="animal-card"><span class="animal-emoji">ğŸ¦­</span><span class="animal-name">æµ·è±¹</span></div>
        
        <div class="animal-card"><span class="animal-emoji">ğŸ¦‰</span><span class="animal-name">è²“é ­é·¹</span></div>
        <div class="animal-card"><span class="animal-emoji">ğŸ¦‰</span><span class="animal-name">è²“é ­é·¹</span></div>
        <div class="animal-card"><span class="animal-emoji">ğŸ¦‰</span><span class="animal-name">è²“é ­é·¹</span></div>

        <div class="animal-card"><span class="animal-emoji">ğŸ</span><span class="animal-name">è›‡</span></div>
        <div class="animal-card"><span class="animal-emoji">ğŸ</span><span class="animal-name">è›‡</span></div>

        <div class="animal-card"><span class="animal-emoji">ğŸ¸</span><span class="animal-name">èŸ¾èœ</span></div>
        <div class="animal-card"><span class="animal-emoji">ğŸ¸</span><span class="animal-name">èŸ¾èœ</span></div>

        <div class="animal-card"><span class="animal-emoji">ğŸŸ</span><span class="animal-name">é¯‰é­š</span></div>
        <div class="animal-card"><span class="animal-emoji">ğŸŸ</span><span class="animal-name">é¯‰é­š</span></div>
    </div>

    <script>
        const draggables = document.querySelectorAll('.animal-card');
        
        let activeItem = null;
        let initialX = 0;
        let initialY = 0;
        let xOffset = 0;
        let yOffset = 0;

        // ç‚ºæ‰€æœ‰å‹•ç‰©å¡ç‰‡æ·»åŠ äº‹ä»¶ç›£è½
        draggables.forEach(item => {
            // è§¸æ§äº‹ä»¶ (iPad/æ‰‹æ©Ÿ)
            item.addEventListener('touchstart', dragStart, {passive: false});
            item.addEventListener('touchend', dragEnd, {passive: false});
            item.addEventListener('touchmove', drag, {passive: false});

            // æ»‘é¼ äº‹ä»¶ (é›»è…¦æ¸¬è©¦)
            item.addEventListener('mousedown', dragStart);
        });

        function dragStart(e) {
            if (e.type === "touchstart") {
                initialX = e.touches[0].clientX - xOffset;
                initialY = e.touches[0].clientY - yOffset;
            } else {
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', dragEnd);
            }

            if (e.target.closest('.animal-card')) {
                activeItem = e.target.closest('.animal-card');
                activeItem.classList.add('dragging');
            }
        }

        function drag(e) {
            if (activeItem) {
                e.preventDefault(); // é˜²æ­¢ç•«é¢æ»¾å‹•

                let clientX, clientY;
                if (e.type === "touchmove") {
                    clientX = e.touches[0].clientX;
                    clientY = e.touches[0].clientY;
                } else {
                    clientX = e.clientX;
                    clientY = e.clientY;
                }

                let currentX = clientX - initialX;
                let currentY = clientY - initialY;

                setTranslate(currentX, currentY, activeItem);
            }
        }

        function setTranslate(xPos, yPos, el) {
            el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0)`;
        }

        function dragEnd(e) {
            if (!activeItem) return;

            let clientX, clientY;
            if (e.type === "touchend") {
                clientX = e.changedTouches[0].clientX;
                clientY = e.changedTouches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', dragEnd);
            }

            activeItem.classList.remove('dragging');

            // æš«æ™‚éš±è—ä»¥ç²å–ä¸‹æ–¹çš„å…ƒç´ 
            activeItem.style.display = 'none';
            let elemBelow = document.elementFromPoint(clientX, clientY);
            activeItem.style.display = 'flex';

            if (elemBelow) {
                // æª¢æŸ¥æ˜¯å¦æ‹–åˆ°äº†ç±ƒå­
                let basket = elemBelow.closest('.basket');
                
                if (basket) {
                    const contentArea = basket.querySelector('.basket-content');
                    contentArea.appendChild(activeItem);
                } else {
                    // æª¢æŸ¥æ˜¯å¦æ‹–å›äº†ä¾†æºå€ (å¦‚æœç©å®¶æƒ³æ”¾å›å»)
                    let sourceArea = elemBelow.closest('.animals-source');
                    if (sourceArea) {
                        sourceArea.appendChild(activeItem);
                    }
                }
            }

            // é‡ç½®ä½ç½®åç§»ï¼Œå› ç‚ºå…ƒç´ å·²ç¶“ç§»å‹•åˆ°æ–°çš„ DOM çˆ¶ç¯€é»ä¸­äº†
            activeItem.style.transform = "none";
            initialX = 0;
            initialY = 0;
            activeItem = null;
        }
    </script>
</body>
</html>